# ğŸŒŸ è·¨å¹³å°BLEé€šä¿¡ç¥å™¨ï¼šApple Watch & iPhone â†”ï¸ Android

![å¹³å°](https://img.shields.io/badge/å¹³å°-Apple%20Watch%20%7C%20iPhone%20%7C%20Android-brightgreen)
![è“ç‰™](https://img.shields.io/badge/æŠ€æœ¯-BLE%205.0-blue)
![è¯­è¨€](https://img.shields.io/badge/è¯­è¨€-Swift%20%7C%20Java-orange)
![SwiftUI](https://img.shields.io/badge/UI-SwiftUI-red)
![Android](https://img.shields.io/badge/Android-Native-green)

## ğŸš€ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªçªç ´æ€§çš„é¡¹ç›®ï¼Œå®ç°äº†Appleç”Ÿæ€ç³»ç»Ÿï¼ˆåŒ…æ‹¬Apple Watchå’ŒiPhoneï¼‰ä¸Androidè®¾å¤‡ä¹‹é—´çš„**å®æ—¶åŒå‘é€šä¿¡**ï¼é€šè¿‡è“ç‰™ä½åŠŸè€—(BLE)æŠ€æœ¯ï¼Œæ‰“ç ´äº†iOSå’ŒAndroidç”Ÿæ€çš„å£å’ï¼Œè®©è·¨å¹³å°é€šä¿¡å˜å¾—ç®€å•è€Œä¼˜é›…ã€‚

### ğŸ“± æ”¯æŒçš„è®¾å¤‡
- Apple Watchï¼šæ‰€æœ‰æ”¯æŒwatchOSçš„Apple Watchè®¾å¤‡
- iPhoneï¼šè¿è¡ŒiOSçš„iPhoneè®¾å¤‡
- Androidï¼šæ”¯æŒBLEçš„Android 6.0åŠä»¥ä¸Šè®¾å¤‡

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ”„ å¤šç«¯ååŒ
- **Watch App**: 
  - å®æ—¶æ‰«æå¹¶æ˜¾ç¤ºå‘¨è¾¹BLEè®¾å¤‡
  - è¯¦ç»†çš„è®¾å¤‡ä¿¡æ¯å±•ç¤ºï¼ˆä¿¡å·å¼ºåº¦ã€æœåŠ¡UUIDç­‰ï¼‰
  - ä¾¿æ·çš„æ¶ˆæ¯å‘é€ç•Œé¢
  - å®æ—¶æ¥æ”¶Androidè®¾å¤‡çš„è®¡æ•°å™¨æ›´æ–°
  - æ”¯æŒè‡ªå®šä¹‰æ¶ˆæ¯å‘é€
  - ç¨³å®šçš„è¿æ¥çŠ¶æ€ç®¡ç†

- **iPhone App**:
  - ä¸Watch Appå…±äº«ç›¸åŒçš„åŠŸèƒ½
  - æ›´å¤§å±å¹•ä¼˜åŒ–çš„UIå¸ƒå±€
  - æ›´è¯¦ç»†çš„è®¾å¤‡ä¿¡æ¯æ˜¾ç¤º
  - æ”¯æŒåå°è¿è¡Œä¿æŒè¿æ¥

- **Android App**:
  - ä½œä¸ºBLEå¤–å›´è®¾å¤‡è¿è¡Œ
  - å®æ—¶è®¡æ•°å™¨ï¼ˆæ¯100msæ›´æ–°ä¸€æ¬¡ï¼‰
  - æ¶ˆæ¯å†å²è®°å½•ï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰
  - ä¼˜é›…çš„MaterialDesignç•Œé¢
  - å®Œæ•´çš„æƒé™ç®¡ç†ç³»ç»Ÿ
  - æ”¯æŒå¤šè®¾å¤‡åŒæ—¶è¿æ¥

### ğŸ›  æŠ€æœ¯ç‰¹æ€§
- **BLEé€šä¿¡**:
  - è‡ªå®šä¹‰Service UUID: 0x180D
  - é€šçŸ¥ç‰¹æ€§UUID: 0x2A37ï¼ˆç”¨äºå‘é€è®¡æ•°å™¨æ•°æ®ï¼‰
  - å†™å…¥ç‰¹æ€§UUID: 0x2A38ï¼ˆç”¨äºæ¥æ”¶æ¶ˆæ¯ï¼‰
  - æ”¯æŒå¸¦å“åº”å’Œæ— å“åº”çš„å†™å…¥æ“ä½œ
  - è‡ªåŠ¨é‡è¿æœºåˆ¶

- **æ•°æ®ä¼ è¾“**:
  - æ¯«ç§’çº§å»¶è¿Ÿ
  - ç¨³å®šçš„æ•°æ®æµ
  - è‡ªåŠ¨çš„è¿æ¥çŠ¶æ€ç®¡ç†
  - å®Œå–„çš„é”™è¯¯å¤„ç†

## ğŸ“± åº”ç”¨æ¶æ„

### Appleç«¯ï¼ˆWatch & iPhoneï¼‰
- **UIå±‚**:
  - ä½¿ç”¨SwiftUIæ„å»º
  - MVVMæ¶æ„è®¾è®¡
  - å“åº”å¼çŠ¶æ€ç®¡ç†
  - ä¼˜é›…çš„åˆ—è¡¨å’Œè¯¦æƒ…è§†å›¾

- **è“ç‰™å±‚**:
  - åŸºäºCoreBluetoothæ¡†æ¶
  - å•ä¾‹BluetoothManagerè®¾è®¡
  - å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - å¼‚æ­¥æ“ä½œå¤„ç†

### Androidç«¯
- **UIå±‚**:
  - åŸç”ŸAndroidè§†å›¾ç³»ç»Ÿ
  - RecyclerViewå±•ç¤ºæ¶ˆæ¯å†å²
  - å®æ—¶çŠ¶æ€æ›´æ–°
  - Material Designé£æ ¼

- **æœåŠ¡å±‚**:
  - åå°Serviceè¿è¡ŒBLEå¤–å›´è®¾å¤‡
  - å¹¿æ’­è€…æ¨¡å¼
  - å®Œæ•´çš„æƒé™æ£€æŸ¥
  - ç”µæºç®¡ç†ä¼˜åŒ–

## ğŸ“² å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Xcode 14.0+
- iOS 15.0+
- watchOS 8.0+
- Android Studio Electric Eel+
- Android SDK 31+
- Java 11+

### Watch Appé…ç½®
1. å…‹éš†é¡¹ç›®åæ‰“å¼€`BTEDemo.xcodeproj`
2. é€‰æ‹©Watch App target
3. é…ç½®å¼€å‘è€…è´¦å·å’Œè¯ä¹¦
4. éƒ¨ç½²åˆ°Apple Watch
5. ç‚¹å‡»æ‰«ææŒ‰é’®å¼€å§‹æœç´¢è®¾å¤‡
6. é€‰æ‹©ç›®æ ‡Androidè®¾å¤‡è¿æ¥
7. åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥æ¶ˆæ¯å¹¶å‘é€

### iPhone Appé…ç½®
1. åœ¨åŒä¸€ä¸ª`BTEDemo.xcodeproj`ä¸­
2. é€‰æ‹©iOS App target
3. é…ç½®å¼€å‘è€…è´¦å·å’Œè¯ä¹¦
4. éƒ¨ç½²åˆ°iPhoneè®¾å¤‡
5. æ“ä½œæ–¹å¼ä¸Watch Appç›¸åŒ

### Androidé…ç½®
1. æ‰“å¼€`android_as_ble`æ–‡ä»¶å¤¹
2. ä½¿ç”¨Android Studioæ‰“å¼€é¡¹ç›®
3. é…ç½®å¼€å‘ç¯å¢ƒ
4. åœ¨Androidè®¾å¤‡ä¸Šå®‰è£…è¿è¡Œ
5. æˆäºˆå¿…è¦æƒé™ï¼š
   - è“ç‰™æƒé™
   - ä½ç½®æƒé™
   - åå°è¿è¡Œæƒé™
6. åº”ç”¨ä¼šè‡ªåŠ¨å¼€å¯BLEå¹¿æ’­
7. ç­‰å¾…Appleè®¾å¤‡è¿æ¥

## ğŸ’¡ å…³é”®ä»£ç ç¤ºä¾‹

### Watch/iPhoneç«¯è“ç‰™ç®¡ç†
```swift
class BluetoothManager: NSObject, ObservableObject {
    // è®¾å¤‡å‘ç°
    func startScanning() {
        // æ‰«æç‰¹å®šUUIDçš„è®¾å¤‡
        let serviceUUID = CBUUID(string: targetServiceUUID)
        centralManager.scanForPeripherals(withServices: [serviceUUID])
    }
    
    // å‘é€æ¶ˆæ¯
    func sendData(_ message: String) {
        guard let characteristic = writeCharacteristic,
              let data = message.data(using: .utf8) else { return }
        peripheral.writeValue(data, for: characteristic)
    }
}
```

### Androidç«¯æœåŠ¡å®ç°
```java
public class BlePeripheralService {
    // å¯åŠ¨å¹¿æ’­
    public void startAdvertising() {
        AdvertiseSettings settings = new AdvertiseSettings.Builder()
                .setAdvertiseMode(AdvertiseSettings.ADVERTISE_MODE_LOW_LATENCY)
                .setConnectable(true)
                .build();
        advertiser.startAdvertising(settings, data, advertiseCallback);
    }
    
    // å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯
    public void onCharacteristicWriteRequest(...) {
        String receivedData = new String(value);
        if (callback != null) {
            callback.onMessageReceived(receivedData);
        }
    }
}
```

## ğŸŒˆ åº”ç”¨åœºæ™¯

- **æ™ºèƒ½å®¶å±…æ§åˆ¶**
  - é€šè¿‡æ‰‹è¡¨æ§åˆ¶Androidè®¾å¤‡ä½œä¸ºæ™ºèƒ½å®¶å±…ç½‘å…³
  - å®æ—¶è·å–è®¾å¤‡çŠ¶æ€æ›´æ–°

- **è¿åŠ¨æ•°æ®åŒæ­¥**
  - å°†æ‰‹è¡¨é‡‡é›†çš„è¿åŠ¨æ•°æ®å®æ—¶åŒæ­¥åˆ°Androidè®¾å¤‡
  - æ”¯æŒè‡ªå®šä¹‰æ•°æ®æ ¼å¼

- **è¿œç¨‹è®¾å¤‡ç›‘æ§**
  - ç›‘æ§Androidè®¾å¤‡çš„å„ç§çŠ¶æ€
  - å®æ—¶æ¥æ”¶å‘Šè­¦ä¿¡æ¯

- **è·¨å¹³å°é€šçŸ¥ç³»ç»Ÿ**
  - Androidæ¶ˆæ¯æ¨é€åˆ°Apple Watch
  - æ”¯æŒåŒå‘ç¡®è®¤æœºåˆ¶

- **IoTè®¾å¤‡äº¤äº’**
  - å°†Androidè®¾å¤‡ä½œä¸ºIoTç½‘å…³
  - Apple Watchä½œä¸ºä¾¿æºæ§åˆ¶å™¨

## ğŸ¯ æœªæ¥è§„åˆ’

- [ ] æ•°æ®ä¼ è¾“åŠ å¯†
  - å®ç°AES-256åŠ å¯†
  - æ·»åŠ å®‰å…¨æ¡æ‰‹æœºåˆ¶

- [ ] å¤šè®¾å¤‡ç»„ç½‘
  - æ”¯æŒä¸€å¯¹å¤šè¿æ¥
  - å®ç°è®¾å¤‡é—´æ¶ˆæ¯è½¬å‘

- [ ] æ•°æ®æ ¼å¼æ‰©å±•
  - æ”¯æŒäºŒè¿›åˆ¶æ•°æ®ä¼ è¾“
  - æ·»åŠ æ–‡ä»¶ä¼ è¾“åŠŸèƒ½

- [ ] ç”µæ± ä¼˜åŒ–
  - å®ç°æ™ºèƒ½æ‰«æé—´éš”
  - ä¼˜åŒ–å¹¿æ’­åŠŸç‡

- [ ] UIå¢å¼º
  - æ·»åŠ æ•°æ®å¯è§†åŒ–
  - æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤Pull Request

## ğŸ“ è®¸å¯è¯

MIT License - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

## ğŸ“š å‚è€ƒèµ„æ–™

- [Core Bluetooth Programming Guide](https://developer.apple.com/documentation/corebluetooth)
- [Android BLE Guide](https://developer.android.com/guide/topics/connectivity/bluetooth-le)
- [SwiftUI Documentation](https://developer.apple.com/documentation/swiftui)

---

â­ï¸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç»™å®ƒä¸€ä¸ªstarï¼

ğŸ“§ é—®é¢˜åé¦ˆï¼šæ¬¢è¿æäº¤Issueæˆ–å‘é€é‚®ä»¶åˆ°[your-email@example.com] 